"use strict";(self.webpackChunkmidjourney_proxy_admin=self.webpackChunkmidjourney_proxy_admin||[]).push([[971],{23391:function(re,F,t){t.r(F),t.d(F,{default:function(){return se}});var V=t(15009),z=t.n(V),H=t(99289),$=t.n(H),W=t(5574),j=t.n(W),u=t(67294),k=t(74981),oe=t(90252),ge=t(22777),e=t(85893),K=function(I){var y=I.value,c=y===void 0?{}:y,a=I.onChange,U=u.useState(JSON.stringify(c,null,2)),Z=j()(U,2),h=Z[0],g=Z[1],C=u.useState(!0),T=j()(C,2),P=T[0],v=T[1];(0,u.useEffect)(function(){var L=JSON.stringify(c),x=JSON.stringify(JSON.parse(h));L!==x&&g(JSON.stringify(c,null,2))},[c]);var b=function(x){g(x);try{var O=JSON.parse(x);v(!0),a&&a(O)}catch(B){v(!1)}};return(0,e.jsxs)("div",{style:{width:"100%"},children:[(0,e.jsx)(k.ZP,{mode:"json",theme:"textmate",value:h,onChange:b,name:"json-editor",editorProps:{$blockScrolling:!0},height:"auto",maxLines:1/0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2,useWorker:!1},style:{width:"100%",minHeight:"80px"},fontSize:14,lineHeight:19,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0}),!P&&(0,e.jsx)("div",{style:{color:"red",marginTop:"8px"},children:"JSON \u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u8F93\u5165\uFF01"})]})},r=K,S=t(66927),X=t(60219),Y=t(90930),w=t(94272),s=t(53025),m=t(2453),q=t(74330),E=t(42075),_=t(40056),ee=t(83062),d=t(26915),A=t(28036),G=t(71230),N=t(15746),D=t(4393),i=t(72269),n=t(74656),p=t(37804),ae=function(){var I=s.Z.useForm(),y=j()(I,1),c=y[0],a=(0,w.useIntl)(),U=(0,u.useState)(!1),Z=j()(U,2),h=Z[0],g=Z[1],C=function(){g(!0),(0,S.iE)().then(function(l){g(!1),l.success&&c.setFieldsValue(l.data)})};(0,u.useEffect)(function(){C()},[]);var T=function(){c.validateFields().then(function(l){g(!0),(0,S.rF)(l).then(function(M){g(!1),M.success?(m.ZP.success(a.formatMessage({id:"pages.setting.saveSuccess"})),C()):m.ZP.error(M.message||a.formatMessage({id:"pages.setting.error"}))})}).catch(function(){m.ZP.error(a.formatMessage({id:"pages.setting.error"}))})},P=(0,u.useState)(""),v=j()(P,2),b=v[0],L=v[1],x=(0,u.useState)(""),O=j()(x,2),B=O[0],ne=O[1],ie=function(){var f=$()(z()().mark(function l(M,J){var Q,R;return z()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,g(!0),Q={Host:M,ApiSecret:J},o.next=5,(0,S.gU)(Q);case 5:R=o.sent,R.success?m.ZP.success(a.formatMessage({id:"pages.setting.migrateSuccess"})):m.ZP.error(R.message),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),m.ZP.error(o.t0);case 12:return o.prev=12,g(!1),o.finish(12);case 15:case"end":return o.stop()}},l,null,[[0,9,12,15]])}));return function(M,J){return f.apply(this,arguments)}}(),le=function(){b?ie(b,B):m.ZP.warning(a.formatMessage({id:"pages.setting.migrateTips"}))};return(0,e.jsx)(Y._z,{children:(0,e.jsx)(s.Z,{form:c,labelAlign:"left",layout:"horizontal",labelCol:{span:6},wrapperCol:{span:18},children:(0,e.jsxs)(q.Z,{spinning:h,children:[(0,e.jsxs)(E.Z,{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)(_.Z,{type:"info",style:{paddingTop:"4px",paddingBottom:"4px"},description:a.formatMessage({id:"pages.setting.tips"})}),(0,e.jsxs)(E.Z,{children:[(0,e.jsx)(ee.Z,{placement:"bottom",title:(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:8},children:[(0,e.jsx)(d.Z,{style:{marginBottom:8},placeholder:"mjplus host",value:b,onChange:function(l){return L(l.target.value)}}),(0,e.jsx)(d.Z,{placeholder:"mj-api-secret",value:B,onChange:function(l){return ne(l.target.value)}})]}),children:(0,e.jsx)(A.ZP,{loading:h,type:"primary",ghost:!0,onClick:le,children:a.formatMessage({id:"pages.setting.migrate"})})}),(0,e.jsx)(A.ZP,{loading:h,icon:(0,e.jsx)(X.Z,{}),type:"primary",onClick:T,children:a.formatMessage({id:"pages.setting.save"})})]})]}),(0,e.jsxs)(G.Z,{gutter:16,children:[(0,e.jsx)(N.Z,{span:12,children:(0,e.jsxs)(D.Z,{title:a.formatMessage({id:"pages.setting.accountSetting"}),bordered:!1,children:[(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableSwagger"}),name:"enableSwagger",extra:c.getFieldValue("enableSwagger")?(0,e.jsx)("a",{href:"/swagger",target:"_blank",rel:"noreferrer",children:a.formatMessage({id:"pages.setting.swaggerLink"})}):"",children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.databaseType"}),name:"databaseType",children:(0,e.jsxs)(n.Z,{allowClear:!0,children:[(0,e.jsx)(n.Z.Option,{value:"LiteDB",children:"LiteDB"}),(0,e.jsx)(n.Z.Option,{value:"MongoDB",children:"MongoDB"}),(0,e.jsx)(n.Z.Option,{value:"SQLite",children:"SQLite"}),(0,e.jsx)(n.Z.Option,{value:"MySQL",children:"MySQL"}),(0,e.jsx)(n.Z.Option,{value:"PostgreSQL",children:"PostgreSQL"}),(0,e.jsx)(n.Z.Option,{value:"SQLServer",children:"SQLServer"})]})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.databaseConnectionString"}),name:"databaseConnectionString",extra:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(A.ZP,{style:{marginTop:8},type:"primary",onClick:function(){g(!0),(0,S.yk)().then(function(l){g(!1),l.success?m.ZP.success(a.formatMessage({id:"pages.setting.connectSuccess"})):m.ZP.error(l.message||a.formatMessage({id:"pages.setting.connectError"}))})},children:a.formatMessage({id:"pages.setting.testConnect"})})}),children:(0,e.jsx)(d.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.databaseName"}),name:"databaseName",children:(0,e.jsx)(d.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.isAutoMigrate"}),name:"isAutoMigrate",tooltip:a.formatMessage({id:"pages.setting.isAutoMigrateTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.maxCount"}),name:"maxCount",children:(0,e.jsx)(p.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.accountChooseRule"}),name:"accountChooseRule",children:(0,e.jsxs)(n.Z,{allowClear:!0,children:[(0,e.jsx)(n.Z.Option,{value:"BestWaitIdle",children:"BestWaitIdle"}),(0,e.jsx)(n.Z.Option,{value:"Random",children:"Random"}),(0,e.jsx)(n.Z.Option,{value:"Weight",children:"Weight"}),(0,e.jsx)(n.Z.Option,{value:"Polling",children:"Polling"})]})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.discordConfig"}),name:"ngDiscord",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.proxyConfig"}),name:"proxy",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.imageStorageType"}),name:"imageStorageType",children:(0,e.jsxs)(n.Z,{allowClear:!0,children:[(0,e.jsx)(n.Z.Option,{value:"NONE",children:"NULL"}),(0,e.jsx)(n.Z.Option,{value:"LOCAL",children:"LOCAL"}),(0,e.jsx)(n.Z.Option,{value:"OSS",children:"Aliyun OSS"}),(0,e.jsx)(n.Z.Option,{value:"COS",children:"Tencent COS"}),(0,e.jsx)(n.Z.Option,{value:"R2",children:"Cloudflare R2"})]})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.localStorage"}),name:"localStorage",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.aliyunOss"}),name:"aliyunOss",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.tencentCos"}),name:"tencentCos",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.cloudflareR2"}),name:"cloudflareR2",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.replicate"}),name:"replicate",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.translate"}),name:"translateWay",children:(0,e.jsxs)(n.Z,{allowClear:!0,children:[(0,e.jsx)(n.Z.Option,{value:"NULL",children:"NULL"}),(0,e.jsx)(n.Z.Option,{value:"BAIDU",children:"BAIDU"}),(0,e.jsx)(n.Z.Option,{value:"GPT",children:"GPT"})]})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.baiduTranslate"}),name:"baiduTranslate",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.openai"}),name:"openai",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.smtp"}),name:"smtp",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.notifyHook"}),name:"notifyHook",children:(0,e.jsx)(d.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.notifyPoolSize"}),name:"notifyPoolSize",children:(0,e.jsx)(p.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.captchaServer"}),name:"captchaServer",help:a.formatMessage({id:"pages.setting.captchaServerTip"}),children:(0,e.jsx)(d.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.captchaNotifyHook"}),name:"captchaNotifyHook",help:a.formatMessage({id:"pages.setting.captchaNotifyHookTip"}),children:(0,e.jsx)(d.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.captchaNotifySecret"}),name:"captchaNotifySecret",help:a.formatMessage({id:"pages.setting.captchaNotifySecretTip"}),children:(0,e.jsx)(d.Z,{})})]})}),(0,e.jsx)(N.Z,{span:12,children:(0,e.jsxs)(D.Z,{title:a.formatMessage({id:"pages.setting.otherSetting"}),bordered:!1,children:[(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableAccountSponsor"}),name:"enableAccountSponsor",help:a.formatMessage({id:"pages.setting.enableAccountSponsorTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.isVerticalDomain"}),name:"isVerticalDomain",help:a.formatMessage({id:"pages.setting.isVerticalDomainTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableRegister"}),name:"enableRegister",children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.registerUserDefaultDayLimit"}),name:"registerUserDefaultDayLimit",children:(0,e.jsx)(p.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.registerUserDefaultTotalLimit"}),name:"registerUserDefaultTotalLimit",children:(0,e.jsx)(p.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.registerUserDefaultCoreSize"}),name:"registerUserDefaultCoreSize",children:(0,e.jsx)(p.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.registerUserDefaultQueueSize"}),name:"registerUserDefaultQueueSize",children:(0,e.jsx)(p.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableGuest"}),name:"enableGuest",children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.guestDefaultDayLimit"}),name:"guestDefaultDayLimit",children:(0,e.jsx)(p.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.guestDefaultCoreSize"}),name:"guestDefaultCoreSize",children:(0,e.jsx)(p.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.guestDefaultQueueSize"}),name:"guestDefaultQueueSize",children:(0,e.jsx)(p.Z,{min:-1})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.bannedLimiting"}),name:"bannedLimiting",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.ipRateLimiting"}),name:"ipRateLimiting",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.ipBlackRateLimiting"}),name:"ipBlackRateLimiting",children:(0,e.jsx)(r,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.notify"}),name:"notify",children:(0,e.jsx)(d.Z.TextArea,{autoSize:{minRows:1,maxRows:10}})})]})})]}),(0,e.jsx)(G.Z,{gutter:16,style:{marginTop:"16px"},children:(0,e.jsx)(N.Z,{span:12,children:(0,e.jsxs)(D.Z,{title:a.formatMessage({id:"pages.setting.discordSetting"}),bordered:!1,children:[(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableAutoGetPrivateId"}),name:"enableAutoGetPrivateId",help:a.formatMessage({id:"pages.setting.enableAutoGetPrivateIdTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableAutoVerifyAccount"}),name:"enableAutoVerifyAccount",help:a.formatMessage({id:"pages.setting.enableAutoVerifyAccountTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableAutoSyncInfoSetting"}),name:"enableAutoSyncInfoSetting",help:a.formatMessage({id:"pages.setting.enableAutoSyncInfoSettingTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableAutoExtendToken"}),name:"enableAutoExtendToken",help:a.formatMessage({id:"pages.setting.enableAutoExtendTokenTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableUserCustomUploadBase64"}),name:"enableUserCustomUploadBase64",help:a.formatMessage({id:"pages.setting.enableUserCustomUploadBase64Tips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableSaveUserUploadBase64"}),name:"enableSaveUserUploadBase64",help:a.formatMessage({id:"pages.setting.enableSaveUserUploadBase64Tips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableSaveUserUploadLink"}),name:"enableSaveUserUploadLink",help:a.formatMessage({id:"pages.setting.enableSaveUserUploadLinkTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableSaveGeneratedImage"}),name:"enableSaveGeneratedImage",help:a.formatMessage({id:"pages.setting.enableSaveGeneratedImageTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableSaveIntermediateImage"}),name:"enableSaveIntermediateImage",help:a.formatMessage({id:"pages.setting.enableSaveIntermediateImageTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableConvertOfficialLink"}),name:"enableConvertOfficialLink",help:a.formatMessage({id:"pages.setting.enableConvertOfficialLinkTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableMjTranslate"}),name:"enableMjTranslate",help:a.formatMessage({id:"pages.setting.enableMjTranslateTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableNijiTranslate"}),name:"enableNijiTranslate",help:a.formatMessage({id:"pages.setting.enableNijiTranslateTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableConvertNijiToMj"}),name:"enableConvertNijiToMj",help:a.formatMessage({id:"pages.setting.enableConvertNijiToMjTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableConvertNijiToNijiBot"}),name:"enableConvertNijiToNijiBot",help:a.formatMessage({id:"pages.setting.enableConvertNijiToNijiBotTips"}),children:(0,e.jsx)(i.Z,{})}),(0,e.jsx)(s.Z.Item,{label:a.formatMessage({id:"pages.setting.enableAutoLogin"}),name:"enableAutoLogin",help:a.formatMessage({id:"pages.setting.enableAutoLoginTips"}),children:(0,e.jsx)(i.Z,{})})]})})})]})})})},se=ae}}]);
